"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const queryMiddleware = require("farce/lib/queryMiddleware");
const createRender = require("found/lib/createRender");
const makeRouteConfig = require("found/lib/makeRouteConfig");
const Route = require("found/lib/Route");
const React = require("react");
const { graphql } = require('react-relay');
const found_relay_1 = require("found-relay");
const relay_runtime_1 = require("relay-runtime");
const Main_1 = require("./components/Main");
const VideoList_1 = require("./components/VideoList");
const SetActiveVideosPage_1 = require("./components/SetActiveVideosPage");
const ErrorPage_1 = require("./components/ErrorPage");
class AppFrame extends React.Component {
    render() {
        return (React.createElement(Main_1.default, null, this.props.children));
    }
}
exports.historyMiddlewares = [queryMiddleware];
function createResolver(fetcher) {
    const environment = new relay_runtime_1.Environment({
        network: relay_runtime_1.Network.create((...args) => fetcher.fetch(...args)),
        store: new relay_runtime_1.Store(new relay_runtime_1.RecordSource()),
    });
    return new found_relay_1.Resolver(environment);
}
exports.createResolver = createResolver;
exports.renderConfig = createRender({
    renderError: ({ error }) => {
        return (React.createElement(AppFrame, null,
            React.createElement(ErrorPage_1.default, { error: error })));
    }
});
const ActiveVideosQuery = graphql `
	query App_ActiveVideos_Query {
		activeVideos {
			...SetActiveVideosPage_activeVideos
			...VideoList_activeVideos
		}
	}
`;
exports.routeConfig = makeRouteConfig(React.createElement(Route, { path: "/", Component: AppFrame },
    React.createElement(Route, { Component: VideoList_1.default, query: ActiveVideosQuery }),
    React.createElement(Route, { path: "videos/forms/set_active", Component: SetActiveVideosPage_1.default, query: ActiveVideosQuery })));
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQXBwLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL0FwcC50c3giXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFDQSw2REFBNkQ7QUFDN0QsdURBQXVEO0FBQ3ZELDZEQUE2RDtBQUM3RCx5Q0FBeUM7QUFDekMsK0JBQThCO0FBQzlCLE1BQU0sRUFBRSxPQUFPLEVBQUUsR0FBRyxPQUFPLENBQUMsYUFBYSxDQUFDLENBQUE7QUFDMUMsNkNBQXNDO0FBQ3RDLGlEQUF5RTtBQUd6RSw0Q0FBb0M7QUFDcEMsc0RBQThDO0FBQzlDLDBFQUFrRTtBQUNsRSxzREFBOEM7QUFHOUMsY0FBZSxTQUFRLEtBQUssQ0FBQyxTQUFtQztJQUUvRCxNQUFNO1FBQUssTUFBTSxDQUFDLENBQ2pCLG9CQUFDLGNBQUksUUFDSCxJQUFJLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FDZCxDQUNQLENBQUE7SUFBQSxDQUFDO0NBRUY7QUFHWSxRQUFBLGtCQUFrQixHQUFHLENBQUMsZUFBZSxDQUFDLENBQUE7QUFHbkQsd0JBQStCLE9BQU87SUFDckMsTUFBTSxXQUFXLEdBQUcsSUFBSSwyQkFBVyxDQUFDO1FBQ25DLE9BQU8sRUFBRSx1QkFBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEdBQUcsSUFBSSxLQUFLLE9BQU8sQ0FBQyxLQUFLLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQztRQUM1RCxLQUFLLEVBQUUsSUFBSSxxQkFBSyxDQUFDLElBQUksNEJBQVksRUFBRSxDQUFDO0tBQ3BDLENBQUMsQ0FBQztJQUVILE1BQU0sQ0FBQyxJQUFJLHNCQUFRLENBQUMsV0FBVyxDQUFDLENBQUM7QUFDbEMsQ0FBQztBQVBELHdDQU9DO0FBR1ksUUFBQSxZQUFZLEdBQUcsWUFBWSxDQUFDO0lBQ3hDLFdBQVcsRUFBRSxDQUFDLEVBQUUsS0FBSyxFQUFFO1FBQU8sTUFBTSxDQUFDLENBQ3BDLG9CQUFDLFFBQVE7WUFDUixvQkFBQyxtQkFBUyxJQUFDLEtBQUssRUFBRSxLQUFLLEdBQUcsQ0FDaEIsQ0FDWCxDQUFBO0lBQUMsQ0FBQztDQUNILENBQUMsQ0FBQTtBQUdGLE1BQU0saUJBQWlCLEdBQUcsT0FBTyxDQUFBOzs7Ozs7O0NBT2hDLENBQUE7QUFFWSxRQUFBLFdBQVcsR0FBRyxlQUFlLENBQ3pDLG9CQUFDLEtBQUssSUFBQyxJQUFJLEVBQUMsR0FBRyxFQUFDLFNBQVMsRUFBRSxRQUFRO0lBQ2xDLG9CQUFDLEtBQUssSUFBQyxTQUFTLEVBQUUsbUJBQVMsRUFBRSxLQUFLLEVBQUUsaUJBQWlCLEdBQUk7SUFDekQsb0JBQUMsS0FBSyxJQUFDLElBQUksRUFBQyx5QkFBeUIsRUFDOUIsU0FBUyxFQUFFLDZCQUFtQixFQUFFLEtBQUssRUFBRSxpQkFBaUIsR0FBSSxDQUM1RCxDQUNSLENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyJcbmltcG9ydCBxdWVyeU1pZGRsZXdhcmUgPSByZXF1aXJlKCdmYXJjZS9saWIvcXVlcnlNaWRkbGV3YXJlJylcbmltcG9ydCBjcmVhdGVSZW5kZXIgPSByZXF1aXJlKCdmb3VuZC9saWIvY3JlYXRlUmVuZGVyJylcbmltcG9ydCBtYWtlUm91dGVDb25maWcgPSByZXF1aXJlKCdmb3VuZC9saWIvbWFrZVJvdXRlQ29uZmlnJylcbmltcG9ydCBSb3V0ZSA9IHJlcXVpcmUoJ2ZvdW5kL2xpYi9Sb3V0ZScpXG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCdcbmNvbnN0IHsgZ3JhcGhxbCB9ID0gcmVxdWlyZSgncmVhY3QtcmVsYXknKVxuaW1wb3J0IHsgUmVzb2x2ZXIgfSBmcm9tICdmb3VuZC1yZWxheSdcbmltcG9ydCB7IEVudmlyb25tZW50LCBOZXR3b3JrLCBSZWNvcmRTb3VyY2UsIFN0b3JlIH0gZnJvbSAncmVsYXktcnVudGltZSdcblxuaW1wb3J0IFJvdXRlQ29tcG9uZW50UHJvcHMgZnJvbSAnLi9wcm9wcy9Sb3V0ZUNvbXBvbmVudCdcbmltcG9ydCBNYWluIGZyb20gJy4vY29tcG9uZW50cy9NYWluJ1xuaW1wb3J0IFZpZGVvTGlzdCBmcm9tICcuL2NvbXBvbmVudHMvVmlkZW9MaXN0J1xuaW1wb3J0IFNldEFjdGl2ZVZpZGVvc1BhZ2UgZnJvbSAnLi9jb21wb25lbnRzL1NldEFjdGl2ZVZpZGVvc1BhZ2UnXG5pbXBvcnQgRXJyb3JQYWdlIGZyb20gJy4vY29tcG9uZW50cy9FcnJvclBhZ2UnXG5cblxuY2xhc3MgQXBwRnJhbWUgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8Um91dGVDb21wb25lbnRQcm9wcywgYW55PiB7XG5cblx0cmVuZGVyKCkgeyByZXR1cm4gKFxuXHRcdDxNYWluPlxuXHRcdFx0e3RoaXMucHJvcHMuY2hpbGRyZW59XG5cdFx0PC9NYWluPlxuXHQpfVxuXG59XG5cblxuZXhwb3J0IGNvbnN0IGhpc3RvcnlNaWRkbGV3YXJlcyA9IFtxdWVyeU1pZGRsZXdhcmVdXG5cblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVJlc29sdmVyKGZldGNoZXIpIHtcblx0Y29uc3QgZW52aXJvbm1lbnQgPSBuZXcgRW52aXJvbm1lbnQoe1xuXHRcdG5ldHdvcms6IE5ldHdvcmsuY3JlYXRlKCguLi5hcmdzKSA9PiBmZXRjaGVyLmZldGNoKC4uLmFyZ3MpKSxcblx0XHRzdG9yZTogbmV3IFN0b3JlKG5ldyBSZWNvcmRTb3VyY2UoKSksXG5cdH0pO1xuXG5cdHJldHVybiBuZXcgUmVzb2x2ZXIoZW52aXJvbm1lbnQpO1xufVxuXG5cbmV4cG9ydCBjb25zdCByZW5kZXJDb25maWcgPSBjcmVhdGVSZW5kZXIoe1xuXHRyZW5kZXJFcnJvcjogKHsgZXJyb3IgfSkgPT4geyByZXR1cm4gKFxuXHRcdDxBcHBGcmFtZT5cblx0XHRcdDxFcnJvclBhZ2UgZXJyb3I9e2Vycm9yfS8+XG5cdFx0PC9BcHBGcmFtZT5cblx0KSB9XG59KVxuXG5cbmNvbnN0IEFjdGl2ZVZpZGVvc1F1ZXJ5ID0gZ3JhcGhxbGBcblx0cXVlcnkgQXBwX0FjdGl2ZVZpZGVvc19RdWVyeSB7XG5cdFx0YWN0aXZlVmlkZW9zIHtcblx0XHRcdC4uLlNldEFjdGl2ZVZpZGVvc1BhZ2VfYWN0aXZlVmlkZW9zXG5cdFx0XHQuLi5WaWRlb0xpc3RfYWN0aXZlVmlkZW9zXG5cdFx0fVxuXHR9XG5gXG5cbmV4cG9ydCBjb25zdCByb3V0ZUNvbmZpZyA9IG1ha2VSb3V0ZUNvbmZpZyhcblx0PFJvdXRlIHBhdGg9XCIvXCIgQ29tcG9uZW50PXtBcHBGcmFtZX0+XG5cdFx0PFJvdXRlIENvbXBvbmVudD17VmlkZW9MaXN0fSBxdWVyeT17QWN0aXZlVmlkZW9zUXVlcnl9IC8+XG5cdFx0PFJvdXRlIHBhdGg9XCJ2aWRlb3MvZm9ybXMvc2V0X2FjdGl2ZVwiXG5cdFx0ICAgICAgIENvbXBvbmVudD17U2V0QWN0aXZlVmlkZW9zUGFnZX0gcXVlcnk9e0FjdGl2ZVZpZGVvc1F1ZXJ5fSAvPlxuXHQ8L1JvdXRlPlxuKVxuIl19